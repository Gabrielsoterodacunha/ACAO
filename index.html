<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ação entre Amigos - Rifa</title>
  <style>
    :root {
      --bg: #0e0e10;
      --card: #18181c;
      --text: #ffffff;
      --accent: #9ca3af;
      --available: #2ecc71;
      --reserved: #e67e22;
      --paid: #3498db;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      min-height: 100vh;
      font-family: "Inter", system-ui, sans-serif;
      background: var(--bg);
      color: var(--text);
      display: flex;
      flex-direction: column;
    }
    header {
      padding: 24px;
      border-bottom: 1px solid rgba(255,255,255,0.05);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .brand { display: flex; align-items: center; gap: 14px; }
    .logo {
      width: 56px; height: 56px; border-radius: 14px;
      background: linear-gradient(135deg,#222,#111);
      display: flex; align-items: center; justify-content: center;
      font-weight: 700; font-size: 20px;
    }
    h1 { font-size: 20px; font-weight: 600; }
    p.subtitle { font-size: 13px; color: var(--accent); margin-top: 4px; }
    .price-badge {
      background: var(--card); padding: 10px 16px;
      border-radius: 12px; font-weight: 600; font-size: 15px;
      border: 1px solid rgba(255,255,255,0.05);
    }
    main { flex: 1; padding: 20px; max-width: 1100px; margin: 0 auto; width: 100%; }
    .legend { display: flex; gap: 18px; align-items: center; margin-bottom: 18px; font-size: 14px; color: var(--accent); }
    .dot { width: 14px; height: 14px; border-radius: 50%; display: inline-block; }
    .info-bar { margin: 10px 0 20px; padding: 12px; background: var(--card); border-radius: 12px; font-size: 14px; }
    .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(70px, 1fr)); gap: 12px; }
    .num {
      border-radius: 12px; padding: 16px; font-size: 18px; font-weight: 700;
      display: flex; align-items: center; justify-content: center;
      cursor: pointer; transition: transform 0.2s, opacity 0.2s;
    }
    .num[data-status="available"] { background: var(--available); color: #fff; }
    .num[data-status="reserved"] { background: var(--reserved); color: #fff; }
    .num[data-status="paid"] { background: var(--paid); color: #fff; cursor: not-allowed; opacity: 0.7; }
    .num:hover { transform: scale(1.05); }
    footer { text-align: center; padding: 20px; font-size: 13px; color: var(--accent); border-top: 1px solid rgba(255,255,255,0.05); }
    @media (max-width: 480px) { .grid { grid-template-columns: repeat(4, 1fr); } }

    /* Modal */
    .modal {
      display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.7); align-items: center; justify-content: center;
    }
    .modal-content {
      background: var(--card); padding: 20px; border-radius: 14px; max-width: 400px; width: 90%;
    }
    .modal-content h2 { margin-bottom: 12px; font-size: 18px; }
    .modal-content label { display: block; margin-top: 10px; font-size: 14px; color: var(--accent); }
    .modal-content input {
      width: 100%; padding: 10px; margin-top: 4px; border-radius: 8px; border: none;
      background: #2a2a2d; color: #fff;
    }
    .modal-content button {
      margin-top: 16px; width: 100%; padding: 12px; border: none;
      border-radius: 10px; font-size: 15px; font-weight: 600; cursor: pointer;
    }
    .btn-submit { background: var(--available); color: #fff; }
    .btn-close { margin-top: 8px; background: #555; color: #fff; }
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <div class="logo">R</div>
      <div>
        <h1>Ação entre Amigos</h1>
        <p class="subtitle">Escolha seu número e finalize o pagamento</p>
      </div>
    </div>
    <div class="price-badge">R$ 50,00 por número</div>
  </header>

  <main>
    <div class="legend">
      <span class="dot" style="background:var(--available)"></span><span>Disponível</span>
      <span class="dot" style="background:var(--reserved)"></span><span>Reservado</span>
      <span class="dot" style="background:var(--paid)"></span><span>Pago</span>
    </div>

    <div class="info-bar">
      <strong>Números selecionados:</strong> <span id="selectedNums">Nenhum</span>
    </div>

    <div class="grid" id="grid"></div>
  </main>

  <footer>
    Pagamento seguro via Mercado Pago<br/>
    <small>Após o pagamento, seu número será registrado automaticamente.</small>
  </footer>

  <!-- Modal do formulário -->
  <div class="modal" id="formModal">
    <div class="modal-content">
      <h2>Preencha seus dados</h2>
      <form id="userForm">
        <label>Nome</label>
        <input type="text" id="nome" required>
        <label>Email</label>
        <input type="email" id="email" required>
        <label>Telefone</label>
        <input type="tel" id="telefone" required>
        <label>CPF</label>
        <input type="text" id="cpf" required>
        <button type="submit" class="btn-submit">Enviar e Pagar</button>
        <button type="button" class="btn-close" id="closeModal">Cancelar</button>
      </form>
    </div>
  </div>

<script>
(function(){
  const TOTAL = 100;
  const PAYMENT_URL = 'https://mpago.la/2tcozTZ';
  const grid = document.getElementById('grid');
  const selectedNums = document.getElementById('selectedNums');
  const formModal = document.getElementById('formModal');
  const closeModal = document.getElementById('closeModal');
  const userForm = document.getElementById('userForm');

  let statusMap = {};
  let selectedNumber = null;

  function render(){
    grid.innerHTML='';
    let pegos = [];
    for(let i=1;i<=TOTAL;i++){
      const key = String(i);
      const st = statusMap[key] || 'available';
      const item = document.createElement('div');
      item.className = 'num';
      item.setAttribute('data-num', key);
      item.setAttribute('data-status', st);
      item.textContent = String(i).padStart(2,'0');

      if(st === 'available'){
        item.addEventListener('click', ()=>{
          selectedNumber = key;
          formModal.style.display = 'flex'; // abre modal
        });
      }
      if(st === 'paid'){ pegos.push(key.padStart(2,'0')); }
      grid.appendChild(item);
    }
    selectedNums.textContent = pegos.length ? pegos.join(', ') : 'Nenhum';
  }

  // Fechar modal
  closeModal.addEventListener('click', ()=>{
    formModal.style.display = 'none';
    userForm.reset();
  });

  // Enviar formulário
  userForm.addEventListener('submit', (e)=>{
    e.preventDefault();
    // Aqui você poderia salvar os dados em algum lugar (Google Sheet, Firebase...)
    console.log("Dados enviados:", {
      numero: selectedNumber,
      nome: document.getElementById('nome').value,
      email: document.getElementById('email').value,
      telefone: document.getElementById('telefone').value,
      cpf: document.getElementById('cpf').value
    });
    formModal.style.display = 'none';
    userForm.reset();

    // Marca como pago no visual
    statusMap[selectedNumber] = 'paid';
    render();

    // Abre link de pagamento
    window.open(PAYMENT_URL,'_blank');
  });

  render();
})();
</script>
</body>
</html>
